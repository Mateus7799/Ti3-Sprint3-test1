<main class="servicos-container">
  <div class="flex flex-1 justify-between items-center mb-4">
    <section>
      <p-iconfield iconPosition="left">
        <p-inputicon class="pi pi-search" />
        <input type="text" pInputText placeholder="Pesquisar ordem de serviço" class="w-96" />
      </p-iconfield>
    </section>
    <section>
      <p-button label="Nova OS" icon="pi pi-plus" iconPos="right"></p-button>
    </section>
  </div>

  @if (servicos.length > 0) {
    <p-table
      [value]="servicos"
      stripedRows
      showGridlines
      [paginator]="true"
      [rowsPerPageOptions]="[10, 20, 50]"
      [rows]="10"
    >
      <ng-template #header>
        <tr>
          <th>Nº OS</th>
          <th>Cliente</th>
          <th>Aparelho</th>
          <th>Defeito</th>
          <th>Data Entrada</th>
          <th>Previsão Entrega</th>
          <th>Status</th>
          <th>Ações</th>
        </tr>
      </ng-template>
      <ng-template #body let-servico>
        <tr>
          <td>{{ servico.numeroOS }}</td>
          <td>{{ servico.cliente }}</td>
          <td>{{ servico.aparelho }}</td>
          <td>{{ servico.defeito }}</td>
          <td>{{ servico.dataEntrada | date: 'dd/MM/yyyy' }}</td>
          <td>{{ servico.previsaoEntrega ? (servico.previsaoEntrega | date: 'dd/MM/yyyy') : '-' }}</td>
          <td>
            <p-tag
              [value]="getStatusLabel(servico.status)"
              [severity]="getStatusSeverity(servico.status)"
            ></p-tag>
          </td>
          <td>
            <p-button icon="pi pi-eye" [rounded]="true" [text]="true" severity="info"></p-button>
            <p-button icon="pi pi-pencil" [rounded]="true" [text]="true" severity="warn"></p-button>
          </td>
        </tr>
      </ng-template>
    </p-table>
  } @else {
    <p-card header="Não há ordens de serviço cadastradas!">
      <p class="m-0">
        Começe a criar ordens de serviço para acompanhar os reparos e manutenções dos aparelhos dos seus clientes.
      </p>
    </p-card>
  }
</main>
